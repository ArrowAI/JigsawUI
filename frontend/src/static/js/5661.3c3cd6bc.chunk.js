"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([[5661],{84164:(e,t,o)=>{o.d(t,{Z:()=>n});var a=o(99586);const n={getAllChatflows:()=>a.Z.get("/flows"),createNewChatflowVersion:(e,t)=>a.Z.post("/flows/".concat(e),t),getSpecificChatflow:e=>a.Z.get("/flows/".concat(e)),getSpecificChatflowFromPublicEndpoint:e=>a.Z.get("/public-chatflows/".concat(e)),createNewChatflow:e=>a.Z.post("/flows",e),updateChatflow:(e,t)=>a.Z.put("/flows/".concat(e),t),deleteChatflow:e=>a.Z.delete("/flows/".concat(e)),getIsChatflowStreaming:e=>a.Z.get("/chatflows-streaming/".concat(e))}},25661:(e,t,o)=>{o.r(t),o.d(t,{default:()=>w});var a=o(4048),n=o(77951),r=o(45730),s=o(92824),l=o(1647),i=o(76113),c=o(40249),d=o(20842),u=o(58),f=o(28111),g=o(60080);const h=e=>{let{show:t,dialogProps:o,onConfirm:n}=e;const h=document.getElementById("portal"),[p,m]=(0,a.useState)(""),[w,C]=(0,a.useState)(""),S=t?(0,g.jsxs)(s.Z,{onKeyUp:e=>{"Enter"===e.key&&n(p,w)},open:t,fullWidth:!0,maxWidth:"xs","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,g.jsx)(l.Z,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:o.title}),(0,g.jsxs)(i.Z,{children:[(0,g.jsx)(c.Z,{children:"Username"}),(0,g.jsx)(f.I,{inputParam:{label:"Username",name:"username",type:"string",placeholder:"john doe"},onChange:e=>m(e),value:p,showDialog:!1}),(0,g.jsx)("div",{style:{marginTop:20}}),(0,g.jsx)(c.Z,{children:"Password"}),(0,g.jsx)(f.I,{inputParam:{label:"Password",name:"password",type:"password"},onChange:e=>C(e),value:w})]}),(0,g.jsx)(d.Z,{children:(0,g.jsx)(u.S,{variant:"contained",onClick:()=>n(p,w),children:o.confirmButtonName})})]}):null;return(0,r.createPortal)(S,h)};var p=o(84164),m=o(91856);o(53427);const w=()=>{const e=document.location.pathname.toString().split("/"),t="chatbot"===e[e.length-1]?"":e[e.length-1],o=(0,n.s0)(),[r,s]=(0,a.useState)(null),[l,i]=(0,a.useState)({}),[c,d]=(0,a.useState)(!1),[u,f]=(0,a.useState)({}),[w,C]=(0,a.useState)(!0),[S,v]=(0,a.useState)({}),Z=(0,m.Z)(p.Z.getSpecificChatflowFromPublicEndpoint),x=(0,m.Z)(p.Z.getSpecificChatflow);return(0,a.useEffect)((()=>{Z.request(t)}),[]),(0,a.useEffect)((()=>{var e,o;Z.error&&(401===(null===(e=Z.error)||void 0===e||null===(o=e.response)||void 0===o?void 0:o.status)&&(localStorage.getItem("username")&&localStorage.getItem("password")?x.request(t):(f({title:"Login",confirmButtonName:"Login"}),d(!0))))}),[Z.error]),(0,a.useEffect)((()=>{var e,t;x.error&&(401===(null===(e=x.error)||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)&&(f({title:"Login",confirmButtonName:"Login"}),d(!0)))}),[x.error]),(0,a.useEffect)((()=>{if(Z.data||x.data){const t=Z.data||x.data;if(s(t),t.chatbotConfig)try{const e=JSON.parse(t.chatbotConfig);i(e),e.overrideConfig&&(e.overrideConfig.generateNewSession&&(e.overrideConfig.sessionId=Date.now().toString()),v(e.overrideConfig))}catch(e){console.error(e),i({}),v({})}}}),[Z.data,x.data]),(0,a.useEffect)((()=>{C(Z.loading||x.loading)}),[Z.loading,x.loading]),(0,g.jsx)(g.Fragment,{children:w?null:(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(h,{show:c,dialogProps:u,onConfirm:(e,t)=>{localStorage.setItem("username",e),localStorage.setItem("password",t),o(0)}})})})}}}]);
//# sourceMappingURL=5661.3c3cd6bc.chunk.js.map